<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<title>SOFT AI</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<script src="https://cdn.jsdelivr.net/npm/tsparticles@2/tsparticles.bundle.min.js"></script>
<style>
  *{margin:0;padding:0;box-sizing:border-box;}
  body{overflow:hidden;font-family:sans-serif;color:#fff;display:flex;flex-direction:column;align-items:center;justify-content:center;height:100vh;position:relative;background:#0b0f1a;}
  #tsparticles{position:fixed;top:0;left:0;width:100%;height:100%;z-index:-1;}
.trap-btn.selected {
  background: linear-gradient(90deg, #ffae00, #ff6f00);
  color: #fff;
}

  h2{margin-bottom:20px;font-size:1.8em;}
  .grid{display:grid;grid-template-columns:repeat(5,60px);grid-gap:12px;}
  .cell{width:60px;height:60px;background:none;border-radius:10px;box-shadow: none !important;position:relative; cursor:pointer;transition:transform .2s;}
  .cell:hover{transform:scale(1.05);}

  .btn{margin-top:20px;padding:14px 32px;border:none;border-radius:12px;background:linear-gradient(90deg,#2672ff,#00c6ff);color:#fff;font-weight:bold;font-size:18px;cursor:pointer;transition:background .3s;}
  .btn:hover:not(:disabled){background:linear-gradient(90deg,#1a5ec4,#009dcf);}
  .btn:disabled{opacity:.6;cursor:not-allowed;background:linear-gradient(90deg,#444,#666);}

  #info{margin-top:12px;color:#aaa;font-size:14px;min-height:18px;}
  #login-form{display:flex;flex-direction:column;gap:10px;width:240px;}
  #login-form input{padding:10px;border-radius:8px;border:none;font-size:16px;color:#000;}
  #error-msg{color:#ff5555;font-size:14px;min-height:18px;}

  #game-selection{display:none;flex-direction:column;gap:15px;margin-top:20px;}
  #coming-soon{display:none;margin-top:20px;font-size:16px;color:#ccc;}

  #back-btn{position:absolute;top:20px;left:20px;font-size:26px;background:none;border:none;color:#fff;cursor:pointer;display:none;z-index:1;}
  #back-btn:hover{color:#00c6ff;}
.trap-selector {
  display: flex;
  align-items: center;
  justify-content: center;
  background-color: #121624;
  border-radius: 12px;
  padding: 10px 20px;
  gap: 18px;
  font-size: 20px;
  color: #fff;
  max-width: 240px;
  margin: 0 auto;
}

.trap-value {
  text-align: center;
  font-weight: bold;
}

#trap-count {
  font-size: 24px;
  margin-bottom: 4px;
}

.trap-label {
  font-size: 14px;
  color: #8892b0;
}

.arrow-btn {
  background: none;
  border: none;
  font-size: 26px;
  color: #8892b0;
  cursor: pointer;
  transition: color 0.2s;
}

.arrow-btn:hover {
  color: #00c6ff;
}

.trap-fade {
  opacity: 0;
  transition: opacity 0.2s ease;
}

.trap-show {
  opacity: 1;
  transition: opacity 0.2s ease;
}

.arrow-btn:disabled {
  opacity: 0.3;
  cursor: default;
}
</style>
</head>
<body>

<div id="tsparticles"></div>

<h2>SOFT AI</h2>

<form id="login-form">
  <input type="number" id="accountId" placeholder="Введите ваш ID" required />
  <button class="btn">Войти</button>
  <div id="error-msg"></div>
</form>

<div id="game-selection">
  <button class="btn" id="btn-mines">Mines</button>
  <button class="btn" id="btn-lucky">Lucky Jet</button>
</div>

<button id="back-btn">←</button>

<div class="grid" id="grid" style="display:none;"></div>
<button class="btn" id="btn-get" style="display:none;">Получить сигнал</button>
<div id="trap-selection" style="display:none; margin-top:12px; text-align:center;">
  <div id="trap-selector" class="trap-selector">
    <button id="left-arrow" class="arrow-btn">&lt;</button>
    <div class="trap-value">
      <div id="trap-count">3</div>
      <div class="trap-label">ловушек</div>
    </div>
    <button id="right-arrow" class="arrow-btn">&gt;</button>
  </div>
</div>
<div id="info" style="display:none;">Сигнал можно получить только раз в 30 секунд.</div>
<div id="coming-soon">Скоро запуск софта</div>

<script>
  tsParticles.load("tsparticles", {
    fpsLimit: 60,
    particles: {
      number:{value:60,density:{enable:true,area:800}},
      color:{value:"#2db7f5"},
      shape:{type:"circle"},
      opacity:{value:0.5,anim:{enable:true,speed:0.8,opacity_min:0.1,sync:false}},
      size:{value:{min:1,max:4}},
      move:{enable:true,speed:0.5,random:true,outMode:"out"}
    },
    interactivity:{detect_on:"canvas",events:{resize:true}},
    retina_detect:true
  });

  const allowed = [111111,222222];
  const form = document.getElementById("login-form"), err = document.getElementById("error-msg");
  const selection = document.getElementById("game-selection"), minesBtn = document.getElementById("btn-mines"), luckyBtn = document.getElementById("btn-lucky");
  const grid = document.getElementById("grid"), getBtn = document.getElementById("btn-get"), info = document.getElementById("info"), soon = document.getElementById("coming-soon"), back = document.getElementById("back-btn");
  const total = 25;
const newSquareSVG = `<svg xmlns="http://www.w3.org/2000/svg" width="56" height="56" fill="none" viewBox="0 0 54 54" style="width:60px; height:60px;">
<defs>
  <radialGradient id="Gradient-2_c_2_r4" cx="0" cy="0" r="1" fx="0" fy="0" gradientUnits="userSpaceOnUse" gradientTransform="matrix(28.6228 -7.61449 6.96925 26.1973 5.358 50.625)">
    <stop offset="0" stop-color="#1c2130"></stop>
    <stop offset="1" stop-color="#1c2130" stop-opacity="0"></stop>
  </radialGradient>
  <radialGradient id="Gradient-3_c_2_r4" cx="0" cy="0" r="1" fx="0" fy="0" gradientUnits="userSpaceOnUse" gradientTransform="matrix(-26.8297 -12.5463 11.4831 -24.5562 19.703 45.611)">
    <stop offset="0" stop-color="#1c2130"></stop>
    <stop offset="1" stop-color="#1c2130" stop-opacity="0"></stop>
  </radialGradient>
  <linearGradient id="Gradient-0_c_2_r4" x1="58.152" y1="24.257" x2="-3.614" y2="28.984" gradientUnits="userSpaceOnUse">
    <stop offset="0" stop-color="#d8fffc" stop-opacity="0.63"></stop>
    <stop offset="0.219" stop-color="#a0fff7" stop-opacity="0"></stop>
    <stop offset="0.491" stop-color="#8dfff6" stop-opacity="0.56"></stop>
    <stop offset="0.733" stop-color="#9af8f0"></stop>
    <stop offset="1" stop-color="#fff" stop-opacity="0"></stop>
    <stop offset="1" stop-color="#bafff9" stop-opacity="0"></stop>
  </linearGradient>
  <linearGradient id="Gradient-1_c_2_r4" x1="24" y1="0" x2="24" y2="48" gradientUnits="userSpaceOnUse">
    <stop offset="0" stop-color="#37b0ce"></stop>
    <stop offset="1" stop-color="#01586b"></stop>
  </linearGradient>
  <clipPath id="clip0_366_7284_c_2_r">
    <rect width="56" height="56" rx="7.593" fill="#fff"></rect>
  </clipPath>
</defs>
<style>
  @keyframes a0_t_c_2_r{0%{transform:translate(28px,28px) scale(0,0) translate(-28px,-28px);animation-timing-function:cubic-bezier(0,0,.58,1)}to{transform:translate(28px,28px) scale(1,1) translate(-28px,-28px)}}
  @keyframes a1_o_c_2_r{0%{opacity:.6}to{opacity:0}}
</style>
<g clip-path="url(#clip0_366_7284_c_2_r)" transform="matrix(0 0 0 0 28 28)" style="animation: 0.25s linear 0s 1 normal both running a0_t_c_2_r;">
  <rect opacity="0.7" width="56" height="56" rx="12" fill="#151C2E"></rect>
  <rect opacity="0.6" width="52" height="52" rx="10" fill="url(#Gradient-0_c_2_r4)" transform="translate(2 2)"></rect>
  <rect width="48" height="48" rx="8" fill="url(#Gradient-1_c_2_r4)" transform="translate(4 4)"></rect>
  <path opacity="0.1" fill-rule="evenodd" clip-rule="evenodd" d="M14.834 60.127c3.731 1.672 7.732.204 11.798-.231 4.245-.454 9.628 1.157 12.1-2.325 2.466-3.477-1.482-7.917-1.818-12.166-.375-4.74 2.845-10.093-.23-13.719-3.261-3.844-9.295-4.521-14.177-3.264-4.482 1.155-6.48 5.88-9.52 9.37-3.412 3.912-9.48 6.762-9.052 11.935.43 5.202 6.134 8.266 10.899 10.4Z" fill="url(#Gradient-2_c_2_r4)"></path>
  <path opacity="0.1" fill-rule="evenodd" clip-rule="evenodd" d="M8.7 53.292c-3.968.987-7.647-1.164-11.573-2.31-4.098-1.196-9.681-.56-11.498-4.423-1.815-3.857 2.854-7.531 3.935-11.655 1.205-4.599-1.02-10.436 2.648-13.462 3.888-3.208 9.947-2.81 14.53-.711 4.208 1.928 5.34 6.931 7.718 10.902 2.667 4.453 8.137 8.33 6.803 13.346-1.342 5.045-7.497 7.053-12.563 8.313Z" fill="url(#Gradient-3_c_2_r4)"></path>
  <rect opacity="0.6" width="56" height="56" rx="12" fill="#151C2E" style="animation: 0.25s linear 0s 1 normal both running a1_o_c_2_r;"></rect>
</g>
</svg>`; 
  let timer;
const trapSelection = document.getElementById("trap-selection");
let remainingTime = 0;
const trapOptions = [1, 3, 5, 7];
let selectedTraps = 3;

const trapCountEl = document.getElementById("trap-count");
const leftArrow = document.getElementById("left-arrow");
const rightArrow = document.getElementById("right-arrow");

function updateTrapDisplay(animate = true) {
  const index = trapOptions.indexOf(selectedTraps);

  // Обновляем доступность кнопок
  leftArrow.disabled = index === 0;
  rightArrow.disabled = index === trapOptions.length - 1;

  // Анимация
  if (animate) {
    trapCountEl.classList.remove("trap-show");
    trapCountEl.classList.add("trap-fade");

    setTimeout(() => {
      trapCountEl.textContent = selectedTraps;
      trapCountEl.classList.remove("trap-fade");
      trapCountEl.classList.add("trap-show");
    }, 150);
  } else {
    trapCountEl.textContent = selectedTraps;
    trapCountEl.classList.add("trap-show");
  }
}

// Кнопки ← →
leftArrow.addEventListener("click", () => {
  const index = trapOptions.indexOf(selectedTraps);
  if (index > 0) {
    selectedTraps = trapOptions[index - 1];
    updateTrapDisplay();
  }
});

rightArrow.addEventListener("click", () => {
  const index = trapOptions.indexOf(selectedTraps);
  if (index < trapOptions.length - 1) {
    selectedTraps = trapOptions[index + 1];
    updateTrapDisplay();
  }
});

// Первая инициализация
updateTrapDisplay(false);

  form.addEventListener("submit", e => {
    e.preventDefault();
    const id = +document.getElementById("accountId").value;
    if(allowed.includes(id)){
      form.style.display="none"; 
      selection.style.display="flex";
      err.textContent = "";
    } else {
      err.textContent="Неверный ID, напишите админу @alexwinai";
    }
  });

 minesBtn.onclick = () => {
  selection.style.display = "none"; 
  back.style.display = "block";
  grid.style.display = "grid"; 
  getBtn.style.display = "block"; 
  info.style.display = "block"; 
  soon.style.display = "none";
  trapSelection.style.display = "block";
  createGrid();

  if (remainingTime > 0) {
    getBtn.disabled = true;
    info.textContent = `Следующий сигнал через ${remainingTime} сек.`;
    timer = setInterval(() => {
      remainingTime--;
      if (remainingTime > 0) {
        info.textContent = `Следующий сигнал через ${remainingTime} сек.`;
      } else {
        clearInterval(timer);
        getBtn.disabled = false;
        info.textContent = "Можно снова.";
      }
    }, 1000);
  } else {
    getBtn.disabled = false;
    info.textContent = "Можно снова.";
  }
};

 luckyBtn.onclick = () => {
  selection.style.display = "none"; 
  back.style.display = "block";
  grid.style.display = "none"; 
  getBtn.style.display = "none"; 
  info.style.display = "none"; 
  soon.style.display = "block";
  trapSelection.style.display = "none";    // <--- добавить
};

  back.onclick = ()=>{
    clearInterval(timer); 
    grid.style.display="none"; 
    getBtn.style.display="none"; 
    info.style.display="none"; 
    soon.style.display="none"; 
    back.style.display="none"; 
    selection.style.display="flex";
    trapSelection.style.display = "none";
  };

  const starSVG = `<svg width="25" height="25" viewBox="0 0 26 26" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12.2752 2.2285C12.6529 1.48818 13.7108 1.48818 14.0885 2.2285L16.735 7.41481C16.8829 7.70466 17.1604 7.90633 17.4818 7.95743L23.2321 8.87169C24.0529 9.0022 24.3798 10.0082 23.7924 10.5963L19.6778 14.7159C19.4478 14.9461 19.3418 15.2724 19.3925 15.5938L20.2999 21.3452C20.4294 22.1662 19.5736 22.7879 18.8329 22.4111L13.6434 19.7708C13.3534 19.6232 13.0103 19.6232 12.7203 19.7708L7.53081 22.4111C6.79004 22.7879 5.93424 22.1662 6.06377 21.3452L6.97119 15.5938C7.0219 15.2724 6.91588 14.9461 6.68592 14.7159L2.57124 10.5963C1.98389 10.0082 2.31077 9.0022 3.1316 8.87169L8.88187 7.95743C9.20324 7.90633 9.48081 7.70466 9.62872 7.41481L12.2752 2.2285Z" fill="#C22A20"></path><path d="M12.2752 2.2285C12.6529 1.48818 13.7108 1.48818 14.0885 2.2285L16.735 7.41481C16.8829 7.70466 17.1604 7.90633 17.4818 7.95743L23.2321 8.87169C24.0529 9.0022 24.3798 10.0082 23.7924 10.5963L19.6778 14.7159C19.4478 14.9461 19.3418 15.2724 19.3925 15.5938L20.2999 21.3452C20.4294 22.1662 19.5736 22.7879 18.8329 22.4111L13.6434 19.7708C13.3534 19.6232 13.0103 19.6232 12.7203 19.7708L7.53081 22.4111C6.79004 22.7879 5.93424 22.1662 6.06377 21.3452L6.97119 15.5938C7.0219 15.2724 6.91588 14.9461 6.68592 14.7159L2.57124 10.5963C1.98389 10.0082 2.31077 9.0022 3.1316 8.87169L8.88187 7.95743C9.20324 7.90633 9.48081 7.70466 9.62872 7.41481L12.2752 2.2285Z" fill="url(#paint0_linear_448_8887history)"></path><path d="M12.2754 2.22809C12.6531 1.48777 13.711 1.48777 14.0887 2.22809L16.7352 7.4144C16.8831 7.70426 17.1607 7.90592 17.482 7.95702L23.2323 8.87128C24.0531 9.00179 24.38 10.0078 23.7927 10.5959L19.678 14.7155C19.448 14.9457 19.342 15.272 19.3927 15.5934L20.3001 21.3448C20.4297 22.1658 19.5739 22.7875 18.8331 22.4107L13.6436 19.7704C13.3536 19.6228 13.0105 19.6228 12.7205 19.7704L7.53102 22.4107C6.79025 22.7875 5.93445 22.1658 6.06398 21.3448L6.9714 15.5934C7.02211 15.272 6.91609 14.9457 6.68613 14.7155L2.57145 10.5959C1.9841 10.0078 2.31098 9.00179 3.13181 8.87128L8.88208 7.95702C9.20345 7.90592 9.48102 7.70426 9.62893 7.4144L12.2754 2.22809Z" fill="url(#paint1_linear_448_8887history)"></path><path d="M12.2754 2.22809C12.6531 1.48777 13.711 1.48777 14.0887 2.22809L16.7352 7.4144C16.8831 7.70426 17.1607 7.90592 17.482 7.95702L23.2323 8.87128C24.0531 9.00179 24.38 10.0078 23.7927 10.5959L19.678 14.7155C19.448 14.9457 19.342 15.272 19.3927 15.5934L20.3001 21.3448C20.4297 22.1658 19.5739 22.7875 18.8331 22.4107L13.6436 19.7704C13.3536 19.6228 13.0105 19.6228 12.7205 19.7704L7.53102 22.4107C6.79025 22.7875 5.93445 22.1658 6.06398 21.3448L6.9714 15.5934C7.02211 15.272 6.91609 14.9457 6.68613 14.7155L2.57145 10.5959C1.9841 10.0078 2.31098 9.00179 3.13181 8.87128L8.88208 7.95702C9.20345 7.90592 9.48102 7.70426 9.62893 7.4144L12.2754 2.22809Z" fill="url(#paint2_radial_448_8887history)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M16.433 7.56862L13.7865 2.38231C13.5347 1.88876 12.8294 1.88876 12.5776 2.38231L9.93115 7.56862C9.73395 7.95509 9.36385 8.22398 8.93536 8.29211L3.18509 9.20637C2.63787 9.29338 2.41995 9.96407 2.81151 10.3561L6.92619 14.4757C7.23281 14.7827 7.37417 15.2177 7.30655 15.6463L6.39914 21.3977C6.31278 21.945 6.88331 22.3595 7.37716 22.1082L12.5666 19.468C12.9533 19.2712 13.4108 19.2712 13.7975 19.468L18.9869 22.1082C19.4808 22.3595 20.0513 21.945 19.965 21.3977L19.0576 15.6463C18.9899 15.2177 19.1313 14.7827 19.4379 14.4757L23.5526 10.3561C23.9442 9.96407 23.7262 9.29338 23.179 9.20637L17.4287 8.29211C17.0003 8.22398 16.6302 7.95509 16.433 7.56862ZM14.0887 2.22809C13.711 1.48777 12.6531 1.48777 12.2754 2.22809L9.62893 7.4144C9.48102 7.70426 9.20345 7.90592 8.88208 7.95702L3.13181 8.87128C2.31098 9.00179 1.9841 10.0078 2.57145 10.5959L6.68613 14.7155C6.91609 14.9457 7.02211 15.272 6.9714 15.5934L6.06398 21.3448C5.93445 22.1658 6.79025 22.7875 7.53102 22.4107L12.7205 19.7704C13.0105 19.6228 13.3536 19.6228 13.6436 19.7704L18.8331 22.4107C19.5739 22.7875 20.4297 22.1658 20.3001 21.3448L19.3927 15.5934C19.342 15.272 19.448 14.9457 19.678 14.7155L23.7927 10.5959C24.38 10.0078 24.0531 9.00179 23.2323 8.87128L17.482 7.95702C17.1607 7.90592 16.8831 7.70426 16.7352 7.4144L14.0887 2.22809Z" fill="url(#paint3_linear_448_8887history)"></path><path d="M12.741 7.3195C12.937 6.98075 13.4261 6.98075 13.6221 7.3195L15.1721 9.99846C15.2442 10.123 15.3656 10.2113 15.5063 10.2413L18.5331 10.8876C18.9159 10.9693 19.067 11.4344 18.8054 11.7255L16.7365 14.0275C16.6403 14.1345 16.594 14.2773 16.6089 14.4204L16.9296 17.4988C16.9701 17.8881 16.5745 18.1755 16.2168 18.0167L13.3882 16.7604C13.2566 16.702 13.1065 16.702 12.975 16.7604L10.1464 18.0167C9.7887 18.1755 9.39305 17.8881 9.4336 17.4988L9.75428 14.4204C9.7692 14.2773 9.72281 14.1345 9.62661 14.0275L7.55775 11.7255C7.29613 11.4344 7.44726 10.9693 7.83001 10.8876L10.8568 10.2413C10.9976 10.2113 11.119 10.123 11.1911 9.99846L12.741 7.3195Z" fill="url(#paint4_linear_448_8887history)"></path><path d="M19.6431 11.3076C13.5027 17.1102 8.01855 14.5437 6.04404 12.5351C3.04056 8.07161 9.63153 11.6424 15.4716 10.0802C20.1437 8.83037 20.1993 10.3777 19.6431 11.3076Z" fill="url(#paint5_linear_448_8887history)"></path><path fill-rule="evenodd" clip-rule="evenodd" d="M12.486 3.38311C12.6114 3.44656 12.6616 3.59966 12.5981 3.72506L11.8786 5.14712C11.8152 5.27252 11.6621 5.32275 11.5367 5.2593C11.4113 5.19585 11.3611 5.04275 11.4245 4.91735L12.144 3.49529C12.2075 3.36989 12.3606 3.31966 12.486 3.38311Z" fill="#F9BE76"></path><circle cx="3.68131" cy="9.52742" r="0.254474" fill="#F9BE76"></circle><circle cx="11.3155" cy="5.62557" r="0.254474" fill="#F9BE76"></circle><path d="M10.7514 8.25268C8.82111 10.9869 9.51093 12.4755 10.0971 12.8781C11.8774 13.6816 15.1214 8.94033 15.3409 7.68564C15.5604 6.43095 13.1642 4.83492 10.7514 8.25268Z" fill="url(#paint6_linear_448_8887history)" fill-opacity="0.6"></path><defs><linearGradient id="paint0_linear_448_8887history" x1="13.1818" y1="0.45166" x2="18.8651" y2="22.4213" gradientUnits="userSpaceOnUse"><stop stop-color="#FBA416" stop-opacity="0"></stop><stop offset="1" stop-color="#FDBB4E" stop-opacity="0.63"></stop></linearGradient><linearGradient id="paint1_linear_448_8887history" x1="13.182" y1="0.451259" x2="18.8653" y2="22.4209" gradientUnits="userSpaceOnUse"><stop stop-color="#FDBB4E" stop-opacity="0"></stop><stop offset="1" stop-color="#FDBB4E" stop-opacity="0.63"></stop></linearGradient><radialGradient id="paint2_radial_448_8887history" cx="0" cy="0" r="1" gradientUnits="userSpaceOnUse" gradientTransform="translate(10.2132 9.86681) rotate(52.6712) scale(14.8278)"><stop offset="0.738765" stop-color="#9CB6DD" stop-opacity="0"></stop><stop offset="0.89825" stop-color="#C6F1FF" stop-opacity="0.37"></stop><stop offset="1" stop-color="#EFFBFF" stop-opacity="0.7"></stop></radialGradient><linearGradient id="paint3_linear_448_8887history" x1="20.3073" y1="17.4162" x2="8.6015" y2="6.81312" gradientUnits="userSpaceOnUse"><stop stop-color="#FEFFD3" stop-opacity="0.63"></stop><stop offset="0.218803" stop-color="#FAFD4E" stop-opacity="0"></stop><stop offset="0.491108" stop-color="#FDFF8B" stop-opacity="0.56"></stop><stop offset="0.733041" stop-color="#F7F990"></stop><stop offset="1" stop-color="white" stop-opacity="0"></stop><stop offset="1" stop-color="#FEFFB7" stop-opacity="0"></stop></linearGradient><linearGradient id="paint4_linear_448_8887history" x1="13.1816" y1="6.55811" x2="13.0119" y2="17.8398" gradientUnits="userSpaceOnUse"><stop stop-color="#FEFFB0"></stop><stop offset="0.277442" stop-color="white" stop-opacity="0.51"></stop><stop offset="1" stop-color="#FAFD4E" stop-opacity="0.15"></stop></linearGradient><linearGradient id="paint5_linear_448_8887history" x1="12.635" y1="10.8612" x2="12.551" y2="14.8707" gradientUnits="userSpaceOnUse"><stop stop-color="#FAFD4E" stop-opacity="0"></stop><stop offset="0.731853" stop-color="#FAFD4E" stop-opacity="0.46"></stop></linearGradient><linearGradient id="paint6_linear_448_8887history" x1="11.5105" y1="8.61842" x2="13.7636" y2="10.7449" gradientUnits="userSpaceOnUse"><stop offset="0.223958" stop-color="#FAFD4E" stop-opacity="0.35"></stop><stop offset="1" stop-color="#FAFD4E" stop-opacity="0"></stop></linearGradient></defs></svg>;

 function createGrid(){
  grid.innerHTML = "";

  for(let i=0; i<total; i++){
    const div = document.createElement("div"); 
    div.className = "cell";
    div.dataset.i = i;
    div.innerHTML = newSquareSVG;
    grid.appendChild(div);
  }
}

getBtn.onclick = () => {
  if(getBtn.disabled) return;

  getBtn.disabled = true;
  remainingTime = 30;
  info.textContent = `Следующий сигнал через ${remainingTime} сек.`;

  // Сброс звёзд
  document.querySelectorAll(".cell.star").forEach(cell => {
    cell.classList.remove("star");
    cell.innerHTML = newSquareSVG;
  });

  timer = setInterval(() => {
    remainingTime--;
    if (remainingTime > 0) {
      info.textContent = `Следующий сигнал через ${remainingTime} сек.`;
    } else {
      clearInterval(timer);
      getBtn.disabled = false;
      info.textContent = "Можно снова.";
    }
  }, 1000);

  const count = Math.floor(Math.random() * 5) + 3;
  const selected = new Set();
  while(selected.size < count) selected.add(Math.floor(Math.random() * total));

  Array.from(selected).forEach((i, o) => setTimeout(() => {
    const cell = document.querySelectorAll(".cell")[i];
    cell.classList.add("star");
    cell.innerHTML = starSVG;
  }, o * 150));
};
</script>

</body>
</html>
